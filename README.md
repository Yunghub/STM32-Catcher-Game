# Catch the Ball Game

Catch the Ball is an embedded system game that runs on an STM32 microcontroller. This project uses an 11x7 LED matrix, a joystick, and a speaker to deliver an interactive gaming experience where the player controls a paddle to catch falling objects.

## Features

- **LED Matrix Display:** An 11x7 LED matrix shows the game graphics.
- **Joystick Control:** Move the paddle using analog joystick inputs.
- **Sound Effects:** Non-blocking PWM beeps provide audio feedback when catching an object.
- **Dynamic Game Speed:** The game accelerates as the player's score increases.
- **Button Interactions:**
  - **B1:** Toggle pause/resume.
  - **PB5:** Increase game speed on a short press and trigger a game-over sequence on a long press.

## Hardware Requirements

- **Microcontroller Board:** NUCLEO-F401RE.
- **Display:** 11x7 LED Matrix.
- **Input Devices:** Analog joystick, push buttons (B1 and PB5).
- **Audio:** Speaker for sound effects.
- **PCB:** PCB design files are available in the `PCB` folder.
- **Programming Tool:** ST-Link or any compatible programmer/debugger.

## Software Requirements

- STM32 HAL libraries
- STM32CubeMX for initial configuration
- GCC toolchain or a compatible ARM development toolchain

## Project Structure

- **main.c:** Contains the main game loop, initialization code, and interrupt callbacks.
- **ledmatrix.h:** Header file for interfacing with the LED matrix (ensure this file is present in your project).
- **PCB Folder:** Contains the PCB design files.
- **HAL and other peripheral configuration files:** Automatically generated by STM32CubeMX.

## How to Build and Flash

1. **Import the Project:**
   - Open the project in your preferred IDE (e.g., STM32CubeIDE).
2. **Configure the Project:**
   - Verify the microcontroller settings and ensure that all peripherals (ADC, TIM, I2C, UART, GPIO) are correctly configured.
3. **Build the Project:**
   - Compile the project using the IDE’s build system.
4. **Flash the Firmware:**
   - Connect your NUCLEO-F401RE board via ST-Link and flash the compiled firmware.

## How to Play

- **Move the Paddle:** Use the joystick to shift the paddle left or right.
- **Catch Falling Objects:** Position your paddle under the falling object to catch it.
- **Increase Score and Speed:** Each successful catch increases the score and slightly speeds up the game.
- **Game Over:**
  - A long press on the PB5 button triggers a game-over sequence, displaying the final score.
  - Releasing PB5 after a short press will increase the game speed.

## Code Overview

- **Joystick Handling:** ADC with DMA is used to read the X and Y values, controlling the paddle’s position.
- **LED Matrix Updates:** The screen is cleared and redrawn in every loop iteration to reflect the current game state.
- **Audio Feedback:** PWM via TIM3 is used to produce beeps; the pitch varies with the player’s score.
- **Interrupts:** External interrupts on buttons manage pausing and game control actions.

## License

This project is licensed under the [MIT License](LICENSE).

## Author

- **Yung**

## Acknowledgments

- Special thanks to the STM32 community and open-source contributors for the invaluable resources and libraries that made this project possible.
